<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>EEIO (Ghosh) Demo</title>
  <style>
    body { font-family: Inter, Arial, system-ui; max-width:900px; margin:28px auto; padding:12px; }
    .card { border-radius:12px; box-shadow:0 6px 18px rgba(20,20,30,0.06); padding:16px; margin-bottom:16px; }
    button { padding:8px 12px; border-radius:8px; border:0; cursor:pointer; }
    pre { background:#0f1724; color:#e6edf3; padding:12px; border-radius:8px; overflow:auto; }
    h2 { margin-top:24px; }
    svg { width:100%; height:auto; }
  </style>
</head>
  
<body>
  <h1>EEIO (Ghosh) Model Demo</h1>

  <!-- Flow Chart -->
  <div class="card">
    <h2>EEIO Ghosh Flow Chart</h2>
    <svg viewBox="0 0 800 400">
      <!-- Z -->
      <rect x="50" y="50" width="150" height="50" fill="#4DBFB5" rx="8"/>
      <text x="125" y="80" font-size="14" text-anchor="middle" fill="#fff">Z (Transactions)</text>

      <!-- X -->
      <rect x="50" y="150" width="150" height="50" fill="#FFB74D" rx="8"/>
      <text x="125" y="180" font-size="14" text-anchor="middle" fill="#fff">X (Gross Output)</text>

      <!-- Ghosh Multipliers -->
      <rect x="300" y="100" width="200" height="50" fill="#6A5ACD" rx="8"/>
      <text x="400" y="130" font-size="14" text-anchor="middle" fill="#fff">Ghosh Multipliers (I - G)^-1</text>

      <!-- F -->
      <rect x="550" y="100" width="150" height="50" fill="#E57373" rx="8"/>
      <text x="625" y="130" font-size="14" text-anchor="middle" fill="#fff">F (Environmental Ext.)</text>

      <!-- Arrows -->
      <line x1="200" y1="75" x2="300" y2="125" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
      <line x1="200" y1="175" x2="300" y2="125" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
      <line x1="500" y1="125" x2="550" y2="125" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>

      <defs>
        <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" fill="#000"/>
        </marker>
      </defs>
    </svg>
  </div>

  <!-- EEIO Example -->
  <div class="card">
    <h2>EEIO Dummy Calculation</h2>
    <button id="runBtn">Run Example</button>
    <div id="status">No run yet.</div>
    <pre id="results">(results will appear here)</pre>
  </div>

  <!-- Matrices -->
  <div class="card">
    <h2>Dummy Matrices (Z, X, F)</h2>
    <pre id="matrices">(matrices will appear here)</pre>
  </div>

  <script>
    function runEEIODemo(){
      const status = document.getElementById('status');
      const resultsEl = document.getElementById('results');
      const matricesEl = document.getElementById('matrices');

      status.innerText = 'Generating dummy dataset...';

      const n = 10; // smaller size for demonstration
      // Dummy Z (transactions)
      let Z = Array.from({length:n}, ()=>Array.from({length:n}, ()=>Math.random()*50));

      // Dummy X (gross output)
      let X = Array.from({length:n}, ()=>Math.random()*100+50);

      // Dummy F (environmental extension)
      let F = Array.from({length:n}, ()=>Math.random()*10);

      // Simplified Ghosh multiplier calculation (I-G)^-1 approximated as identity for demo)
      let footprints = Z.map((row,i)=>row.reduce((sum,j)=>sum + j*F[i],0));
      let total_env_current = X.map((val,i)=>val*F[i]);

      // Top 5 by footprints
      let idx = footprints.map((v,i)=>[i,v]).sort((a,b)=>b[1]-a[1]).slice(0,5);
      let s = 'Top 5 sectors by footprint:\n';
      idx.forEach(([i,v])=>s+=`${i}\t${v.toFixed(2)}\n`);

      // Top 5 by total env
      let idx2 = total_env_current.map((v,i)=>[i,v]).sort((a,b)=>b[1]-a[1]).slice(0,5);
      s+='\nTop 5 sectors by total environment:\n';
      idx2.forEach(([i,v])=>s+=`${i}\t${v.toFixed(2)}\n`);

      resultsEl.innerText = s;

      // Show matrices
      let matricesText = 'Z (Transactions Matrix):\n';
      matricesText += Z.map(row=>row.map(v=>v.toFixed(1)).join(', ')).join('\n');
      matricesText += '\n\nX (Gross Output):\n'+X.map(v=>v.toFixed(1)).join(', ');
      matricesText += '\n\nF (Environmental Extension):\n'+F.map(v=>v.toFixed(1)).join(', ');
      matricesEl.innerText = matricesText;

      status.innerText = 'Dummy EEIO calculation complete.';
    }

    document.getElementById('runBtn').addEventListener('click', runEEIODemo);
  </script>
</body>
</html>
